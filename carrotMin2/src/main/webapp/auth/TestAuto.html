<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<input id="productName" name="productName" class="w96p" />

<script>

$(function(){
	//자동완성 기능 처리
	//키보드를 누를때마다 ajax로 AutoCompleteProductServlet.java 부분을 실행합니다.
	$("#mcode").bind('keyup',function(){
		$.ajax({
			url:'/AutoCompleteProductSevelt',
			// 데이터 부분에는 검색어를 넣어서 보냅니다.
			data : {'scname' : $('#mcode').val()},
			dataType:'html',
			type:'post',
			// 검색어로 검색을 성공하였을때 실행하는 부분
			success: function(data){
				// 여러개의 결과를 배열로 받을 때 구분값을 ',' 로 해줍니다.
				var code = data.split(',');
				// 자동완성 되어져서 보여지는 부분입니다.
				$('#mlist').autocomplete({
					source:scname,
				// 자동완성된 결과를 클릭하였을 때 처리하는 부분입니다.
				select : function(event, ui){
					//returnValues(클릭되어진 값이 ? 있으면 클릭되어진 값을: 
					//없으면 검색어를 가져갑니다.)
					returnValues(ui.item?ui.item.label:this.value);
				}
				});
			}
		});
	});
	//클릭 되어진 값을 가져와서 처리하는 부분입니다.
	function returnValues(datas){
		//검색되어진 값을 가져와서 '/' 으로 나눕니다.
		var scname = datas.split('/');
		var stel = scname[scname.length-2];
		var sname = scname[scname.length-1];
		// 나눈 부분 중에 끝에서 두번째 결과를 가져와서 저장합니다.
		alert(scname);
		alert(stel);
		alert(sname);
	}
	})

</script>
</body>
</html>
